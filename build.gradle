plugins {
	id 'java'
	id 'groovy'
	id 'eclipse'
	id 'idea'
	id 'application'
	id 'com.github.johnrengelman.shadow' version '1.2.2'
}

group = 'com.github.aesteve'
version = '0.1'

sourceCompatibility = '1.8'

repositories {
	mavenLocal()
	mavenCentral()
	jcenter()
}

dependencies {
	compile 'org.codehaus.groovy:groovy-all:2.4.5'
	compile "com.github.aesteve:grooveex:0.6"
	compile "io.vertx:vertx-mongo-client:$vertxVersion"

	testCompile 'junit:junit:4.12'
	testCompile "io.vertx:vertx-unit:$vertxVersion"
}

mainClassName = 'io.vertx.core.Launcher'
def mainVerticle = 'groovy:com.github.aesteve.vertx.portal.MainVerticle'

shadowJar  {
	classifier = ''
	mergeServiceFiles {
		include 'META-INF/services/io.vertx.core.spi.VerticleFactory'
	}
	into 'webroot', {
		from 'webroot'
	}
}

run {
	args = ['run', mainVerticle]
}

task wrapper(type: Wrapper) {
	gradleVersion = '2.9'
}
